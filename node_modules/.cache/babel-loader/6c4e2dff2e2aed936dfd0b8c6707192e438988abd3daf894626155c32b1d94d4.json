{"ast":null,"code":"import React,{useState}from'react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Square(_ref){let{value,onClick}=_ref;return/*#__PURE__*/_jsx(\"button\",{className:\"square \".concat(value?\"square-\".concat(value):''),onClick:onClick,children:value});}function Board(_ref2){let{squares,onClick}=_ref2;const renderSquare=i=>{return/*#__PURE__*/_jsx(Square,{value:squares[i],onClick:()=>onClick(i)});};const boardSize=15;const rows=[];for(let i=0;i<boardSize;i++){const cells=[];for(let j=0;j<boardSize;j++){cells.push(renderSquare(i*boardSize+j));}rows.push(/*#__PURE__*/_jsx(\"div\",{className:\"board-row\",children:cells},i));}return/*#__PURE__*/_jsx(\"div\",{className:\"board\",children:rows});}function Game(){const[history,setHistory]=useState([{squares:Array(225).fill(null),position:null}]);const[stepNumber,setStepNumber]=useState(0);const[isBlackNext,setIsBlackNext]=useState(true);const handleClick=i=>{const currentHistory=history.slice(0,stepNumber+1);const current=currentHistory[currentHistory.length-1];const squares=current.squares.slice();if(calculateWinner(squares)||squares[i]){return;}squares[i]=isBlackNext?'●':'○';setHistory(currentHistory.concat([{squares:squares,position:{row:Math.floor(i/15)+1,col:i%15+1}}]));setStepNumber(currentHistory.length);setIsBlackNext(!isBlackNext);};const jumpTo=step=>{setStepNumber(step);setIsBlackNext(step%2===0);};const current=history[stepNumber];const winner=calculateWinner(current.squares);const moves=history.map((step,move)=>{const desc=move?\"\\u8DF3\\u8F6C\\u5230\\u7B2C \".concat(move,\" \\u6B65 \").concat(step.position?\"(\".concat(step.position.row,\", \").concat(step.position.col,\")\"):''):'游戏开始';return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"history-button \".concat(move===stepNumber?'current':''),onClick:()=>jumpTo(move),children:desc})},move);});let status;if(winner){status=\"\\u83B7\\u80DC\\u8005: \".concat(winner==='●'?'黑棋':'白棋');}else{status=\"\\u4E0B\\u4E00\\u6B65: \".concat(isBlackNext?'黑棋':'白棋');}return/*#__PURE__*/_jsxs(\"div\",{className:\"game\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u4E94\\u5B50\\u68CB\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status\",children:status}),/*#__PURE__*/_jsx(\"ol\",{className:\"history-list\",children:moves})]}),/*#__PURE__*/_jsx(\"div\",{className:\"game-board\",children:/*#__PURE__*/_jsx(Board,{squares:current.squares,onClick:i=>handleClick(i)})})]});}function calculateWinner(squares){const size=15;const winLength=5;for(let row=0;row<size;row++){for(let col=0;col<size;col++){if(!squares[row*size+col])continue;// 检查水平\nif(col<=size-winLength){let win=true;for(let i=1;i<winLength;i++){if(squares[row*size+col]!==squares[row*size+col+i]){win=false;break;}}if(win)return squares[row*size+col];}// 检查垂直\nif(row<=size-winLength){let win=true;for(let i=1;i<winLength;i++){if(squares[row*size+col]!==squares[(row+i)*size+col]){win=false;break;}}if(win)return squares[row*size+col];}// 检查对角线\nif(row<=size-winLength&&col<=size-winLength){let win=true;for(let i=1;i<winLength;i++){if(squares[row*size+col]!==squares[(row+i)*size+col+i]){win=false;break;}}if(win)return squares[row*size+col];}// 检查反对角线\nif(row<=size-winLength&&col>=winLength-1){let win=true;for(let i=1;i<winLength;i++){if(squares[row*size+col]!==squares[(row+i)*size+col-i]){win=false;break;}}if(win)return squares[row*size+col];}}}return null;}export default Game;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Square","_ref","value","onClick","className","concat","children","Board","_ref2","squares","renderSquare","i","boardSize","rows","cells","j","push","Game","history","setHistory","Array","fill","position","stepNumber","setStepNumber","isBlackNext","setIsBlackNext","handleClick","currentHistory","slice","current","length","calculateWinner","row","Math","floor","col","jumpTo","step","winner","moves","map","move","desc","status","size","winLength","win"],"sources":["C:/Users/马明厚/Desktop/wzqi/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './App.css';\r\n\r\nfunction Square({ value, onClick }) {\r\n    return (\r\n        <button\r\n            className={`square ${value ? `square-${value}` : ''}`}\r\n            onClick={onClick}\r\n        >\r\n            {value}\r\n        </button>\r\n    );\r\n}\r\n\r\nfunction Board({ squares, onClick }) {\r\n    const renderSquare = (i) => {\r\n        return (\r\n            <Square\r\n                value={squares[i]}\r\n                onClick={() => onClick(i)}\r\n            />\r\n        );\r\n    };\r\n\r\n    const boardSize = 15;\r\n    const rows = [];\r\n    for (let i = 0; i < boardSize; i++) {\r\n        const cells = [];\r\n        for (let j = 0; j < boardSize; j++) {\r\n            cells.push(renderSquare(i * boardSize + j));\r\n        }\r\n        rows.push(\r\n            <div key={i} className=\"board-row\">\r\n                {cells}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return <div className=\"board\">{rows}</div>;\r\n}\r\n\r\nfunction Game() {\r\n    const [history, setHistory] = useState([{\r\n        squares: Array(225).fill(null),\r\n        position: null\r\n    }]);\r\n    const [stepNumber, setStepNumber] = useState(0);\r\n    const [isBlackNext, setIsBlackNext] = useState(true);\r\n\r\n    const handleClick = (i) => {\r\n        const currentHistory = history.slice(0, stepNumber + 1);\r\n        const current = currentHistory[currentHistory.length - 1];\r\n        const squares = current.squares.slice();\r\n\r\n        if (calculateWinner(squares) || squares[i]) {\r\n            return;\r\n        }\r\n\r\n        squares[i] = isBlackNext ? '●' : '○';\r\n        setHistory(currentHistory.concat([{\r\n            squares: squares,\r\n            position: {\r\n                row: Math.floor(i / 15) + 1,\r\n                col: (i % 15) + 1\r\n            }\r\n        }]));\r\n        setStepNumber(currentHistory.length);\r\n        setIsBlackNext(!isBlackNext);\r\n    };\r\n\r\n    const jumpTo = (step) => {\r\n        setStepNumber(step);\r\n        setIsBlackNext((step % 2) === 0);\r\n    };\r\n\r\n    const current = history[stepNumber];\r\n    const winner = calculateWinner(current.squares);\r\n\r\n    const moves = history.map((step, move) => {\r\n        const desc = move ?\r\n            `跳转到第 ${move} 步 ${step.position ?\r\n                `(${step.position.row}, ${step.position.col})` : ''}` :\r\n            '游戏开始';\r\n        return (\r\n            <li key={move}>\r\n                <button\r\n                    className={`history-button ${move === stepNumber ? 'current' : ''}`}\r\n                    onClick={() => jumpTo(move)}\r\n                >\r\n                    {desc}\r\n                </button>\r\n            </li>\r\n        );\r\n    });\r\n\r\n    let status;\r\n    if (winner) {\r\n        status = `获胜者: ${winner === '●' ? '黑棋' : '白棋'}`;\r\n    } else {\r\n        status = `下一步: ${isBlackNext ? '黑棋' : '白棋'}`;\r\n    }\r\n\r\n    return (\r\n        <div className=\"game\">\r\n            <h1>五子棋</h1>\r\n            <div className=\"game-info\">\r\n                <div className=\"status\">{status}</div>\r\n                <ol className=\"history-list\">{moves}</ol>\r\n            </div>\r\n            <div className=\"game-board\">\r\n                <Board\r\n                    squares={current.squares}\r\n                    onClick={(i) => handleClick(i)}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction calculateWinner(squares) {\r\n    const size = 15;\r\n    const winLength = 5;\r\n\r\n    for (let row = 0; row < size; row++) {\r\n        for (let col = 0; col < size; col++) {\r\n            if (!squares[row * size + col]) continue;\r\n\r\n            // 检查水平\r\n            if (col <= size - winLength) {\r\n                let win = true;\r\n                for (let i = 1; i < winLength; i++) {\r\n                    if (squares[row * size + col] !== squares[row * size + col + i]) {\r\n                        win = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (win) return squares[row * size + col];\r\n            }\r\n\r\n            // 检查垂直\r\n            if (row <= size - winLength) {\r\n                let win = true;\r\n                for (let i = 1; i < winLength; i++) {\r\n                    if (squares[row * size + col] !== squares[(row + i) * size + col]) {\r\n                        win = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (win) return squares[row * size + col];\r\n            }\r\n\r\n            // 检查对角线\r\n            if (row <= size - winLength && col <= size - winLength) {\r\n                let win = true;\r\n                for (let i = 1; i < winLength; i++) {\r\n                    if (squares[row * size + col] !== squares[(row + i) * size + col + i]) {\r\n                        win = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (win) return squares[row * size + col];\r\n            }\r\n\r\n            // 检查反对角线\r\n            if (row <= size - winLength && col >= winLength - 1) {\r\n                let win = true;\r\n                for (let i = 1; i < winLength; i++) {\r\n                    if (squares[row * size + col] !== squares[(row + i) * size + col - i]) {\r\n                        win = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (win) return squares[row * size + col];\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nexport default Game;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}